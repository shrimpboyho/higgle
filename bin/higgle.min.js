!function(){function checkCall(cb,arg){return cb?(cb(arg),void 0):arg}Array.prototype.clear=function(){for(;this.length>0;)this.pop()},Array.prototype.insert=function(element){this.push(element)},Array.prototype.matchQuery=function(doc,query){var i,queryKeys=Object.keys(query),queryKeysNum=queryKeys.length,queryValues=[];for(i=0;i<queryKeys.length;i++)queryValues.push(query[queryKeys[i]]);var docKeys=Object.keys(doc),docValues=[];for(i=0;i<docKeys.length;i++)docValues.push(doc[docKeys[i]]);var k,buffer=[];for(i=0;i<docKeys.length;i++)for(k=0;k<queryKeys.length;k++)if(docKeys[i]==queryKeys[k]){var dvalue=docValues[i],qvalue=queryValues[k];if(typeof dvalue!=typeof qvalue)continue;var type=typeof qvalue;Array.isArray(qvalue)?JSON.stringify(qvalue)===JSON.stringify(dvalue)&&buffer.push(!0):"object"===type&&JSON.stringify(qvalue)===JSON.stringify(dvalue)&&buffer.push(!0),qvalue===dvalue&&buffer.push(!0)}return buffer.length===queryKeysNum?!0:!1},Array.prototype.find=function(query,callback){if(query&&"{}"!==JSON.stringify(query)){var i,result=[];for(i=0;i<this.length;i++){var currentDoc=this[i];result.matchQuery(currentDoc,query)&&result.push(currentDoc)}return 0!==result.length?checkCall(callback,result):checkCall(callback,!1)}return this},this.Higgle=function(){this.collections=[]},Higgle.prototype.createCollection=function(name){this.collections.push([name,[]])},Higgle.prototype.collection=function(name,callback){var i;for(i=0;i<this.collections.length;i++)if(name==this.collections[i][0])return checkCall(callback,this.collections[i][1]);return checkCall(callback,!1)},Higgle.prototype.close=function(){return!0}}(this),module.exports=Higgle;