!function(){function checkCall(cb,arg){return cb?(cb(arg),void 0):arg}Array.prototype.clear=function(){for(;this.length>0;)this.pop()},Array.prototype.insert=function(element){this.push(element)},Array.prototype.matchQuery=function(doc,query){var i,queryKeys=Object.keys(query),queryKeysNum=queryKeys.length,queryValues=[];for(i=0;i<queryKeys.length;i++)queryValues.push(query[queryKeys[i]]);var docKeys=Object.keys(doc),docValues=[];for(i=0;i<docKeys.length;i++)docValues.push(doc[docKeys[i]]);var k,buffer=[];for(i=0;i<docKeys.length;i++)for(k=0;k<queryKeys.length;k++)if(docKeys[i]==queryKeys[k]){var dvalue=docValues[i],qvalue=queryValues[k];if(typeof dvalue!=typeof qvalue&&"HiggleOp"!==qvalue.constructor.name)continue;if(typeof dvalue==typeof qvalue&&"HiggleOp"===qvalue.constructor.name);else{var type=typeof qvalue;Array.isArray(qvalue)?JSON.stringify(qvalue)===JSON.stringify(dvalue)&&buffer.push(!0):"object"===type&&JSON.stringify(qvalue)===JSON.stringify(dvalue)&&buffer.push(!0),qvalue===dvalue&&buffer.push(!0)}}return buffer.length===queryKeysNum?!0:!1},Array.prototype.find=function(query,callback){if(query&&"{}"!==JSON.stringify(query)){var i,result=[];for(i=0;i<this.length;i++){var currentDoc=this[i];result.matchQuery(currentDoc,query)&&result.push(currentDoc)}return 0!==result.length?checkCall(callback,result):checkCall(callback,!1)}return this},this.Higgle=function(){this.collections=[]},Higgle.prototype.createCollection=function(name){this.collections.push([name,[]])},Higgle.prototype.collection=function(name,callback){var i;for(i=0;i<this.collections.length;i++)if(name==this.collections[i][0])return checkCall(callback,this.collections[i][1]);return checkCall(callback,!1)},Higgle.prototype.close=function(){return!0},this.HiggleOp=function(type){this.type=type},HiggleOp.prototype.setLess=function(less){this.less=less},HiggleOp.prototype.setGreat=function(great){this.great=great},HiggleOp.prototype.setRange=function(lower,upper){this.lower=lower,this.upper=upper},this.less=function(num){var op=new HiggleOp("less");return op.setLess(num),op},this.great=function(num){var op=new HiggleOp("great");return op.setGreat(num),op},this.range=function(lower,upper){var op=new HiggleOp("range");return op.setRange(lower,upper),op}}(this),module.exports=Higgle;